language: ruby
before_install:
  - "gem install rjack-tarpit -v=2.1.2"
  - "gem install bundler -v=1.15.1"
install: "bundle install --jobs=3 --retry=3"
sudo: false
dist: trusty
addons:
  postgresql: "9.6"
services:
  - postgresql
before_script:
  - psql -c "CREATE DATABASE human_ql_test;" -U postgres
  - psql -c "ALTER DATABASE human_ql_test SET default_text_search_config = 'pg_catalog.english';" -U postgres
rvm:
  - 2.3.8
  - 2.5.3
  - ruby-head
  - jruby-9.1.17.0
  - jruby-9.2.5.0
matrix:
  allow_failures:
    - rvm: ruby-head
