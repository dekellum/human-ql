language: ruby
before_install: "gem install rjack-tarpit -v=2.1.2"
install: "bundle install --jobs=3 --retry=3"
sudo: false
dist: trusty
addons:
  postgresql: "9.6"
services:
  - postgresql
before_script:
  - psql -c "CREATE DATABASE human_ql_test;" -U postgres
  - psql -c "ALTER DATABASE human_ql_test SET default_text_search_config = 'pg_catalog.english';" -U postgres
rvm:
  - 2.2.7
  - 2.3.4
  - ruby-head
  - rbx
  - jruby-1.7.26
  - jruby-9.1.9.0
  - jruby-head
matrix:
  allow_failures:
    - rvm: ruby-head
    - rvm: rbx
    - rvm: jruby-head
