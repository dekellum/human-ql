language: ruby
before_install:
  - "gem install rjack-tarpit -v=2.1.2"
  - "gem install bundler -v=1.17.3"
install: "bundle _1.17.3_ install --jobs=3 --retry=3"
dist: xenial
addons:
  postgresql: "10"
services:
  - postgresql
before_script:
  - psql -c "CREATE DATABASE human_ql_test;" -U postgres
  - psql -c "ALTER DATABASE human_ql_test SET default_text_search_config = 'pg_catalog.english';" -U postgres
rvm:
  - 2.3.8
  - 2.4.5
  - 2.5.3
  - ruby-head
  - jruby-9.1.17.0
  - jruby-9.2.5.0
matrix:
  allow_failures:
    - rvm: ruby-head
